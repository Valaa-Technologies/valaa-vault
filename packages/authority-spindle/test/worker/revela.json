{
  "name": "@valos/authority-spindle-test-worker",
  "description": "",
  "valos": {
    "type": "revelation",
    "domain": "@valos/kernel"
  },
  "gateway": {
    "authorityConfigs": { "!!!": "./revelation/authorityConfigs.json" },
    "verbosity": 1,
    "corpus": { "verbosity": 0 },
    "falseProphet": { "verbosity": 0 },
    "scribe": { "verbosity": 0 }
  },
  "prologue": {
    "rootChronicleURI": "valaa-local:?id=@$~u4.f3d306d9-79ac-4087-afbc-46f739226eb2@@",
    "partitionInfos": { "!!!": "./revelation/partitionInfos.json" },
    "bvobInfos": { "!!!": "./revelation/bvobInfos.json" },
    "bvobBuffers": { "!!!": "./revelation/bvobBuffers.json" },
    "authorityConfigs": { "!!!": "./revelation/authorityConfigs.json" }
  },
  "spindles": {
    "@valos/authority-spindle": {
      "verbosity": 2
    },
    "@valos/web-spindle": {
      "server": {
        "port": 7358,
        "httpsRedirectPort": 7381,
        "address": "localhost",
        "verbosity": 1,
        "fastify": {
          "ignoreTrailingSlash": false,
          "logger": false,
          "pluginTimeout": 30000,
          "https": {
            "allowHTTP1": true,
            "key": "packages/authority-spindle/test/worker/env/test-authority-localhost.key.pem",
            "cert": "packages/authority-spindle/test/worker/env/test-authority-localhost.crt"
          }
        }
      },
      "prefixes": {
        "/testaur": {
          "view": {
            "name": "authority-test-view",
            "verbosity": 1,
            "engine": { "verbosity": 0, "discourse": { "verbosity": 0 } },
            "focus": "valaa-local:?id=@$~u4.f3d306d9-79ac-4087-afbc-46f739226eb2@@"
          },
          "identity": {
            "clientURI": "valaa-local:?id=@$~u4.f3d306d9-79ac-4087-afbc-46f739226eb2@@",
            "clientSecret": "pen-pineapple-apple-pen"
          },
          "sessionDuration": 3600,
          "swaggerPrefix": "/openapi",
          "openapi": {
            "openapi": "3.0.2",
            "info": {
              "title": "",
              "name": { "!!!": ["../../package", "name"] },
              "version": { "!!!": ["../../package", "version"] },
              "description": { "!!!": ["../../package", "description"] }
            },
            "servers": [],
            "host": "localhost",
            "schemes": ["http", "https"],
            "consumes": ["application/json"],
            "produces": ["application/json"],
            "tags": [],
            "securityDefinitions": { "apiKey": { "type": "apiKey", "name": "apiKey", "in": "header" } }
          },
          "routes": [{
            "url": "/~aur!valosp!3A!2F!2Flocalhost!3A7358!2Ftestaur!2F/.authorityConfig/",
            "method": "GET",
            "projector": "static",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "body": {
                "!!!": ["./revelation/authorityConfigs", "valosp://localhost:7358/testaur/"],
                "isRemoteAuthority": true
              },
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Get authority config",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/-log!:eventIndex(^\\d+)/",
            "method": "GET",
            "projector": "@valos/authority-spindle#/event",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "authorityURI": "valosp://localhost:7358/testaur/",
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Narrate a single event from a chronicle log",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/-log!:eventIndex(^\\d+)/",
            "method": "OPTIONS",
            "projector": "static",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "headers": {
                "Access-Control-Allow-Methods": "GET, OPTIONS, PUT",
                "Access-Control-Allow-Headers": "*",
                "Access-Control-Allow-Origin": "*"
              }
            } },
            "schema": {
              "description": "Enable CORS for single chronicle log event GET, OPTIONS, and PUT",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/-log!:eventIndex(^\\d+)/",
            "method": "PUT",
            "projector": "@valos/authority-spindle#/event",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "authorityURI": "valosp://localhost:7358/testaur/",
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Proclaim a single event to a chronicle log",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/-log:startIndex(^(|'![^']+))",
            "method": "GET",
            "projector": "@valos/authority-spindle#/log",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "authorityURI": "valosp://localhost:7358/testaur/",
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Narrate multiple events from a chronicle log",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/-log:startIndex(^(|'![^']+)):endIndex(^(|'![^']+))",
            "method": "OPTIONS",
            "projector": "static",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "headers": {
                "Access-Control-Allow-Methods": "GET, OPTIONS, POST",
                "Access-Control-Allow-Headers": "*",
                "Access-Control-Allow-Origin": "*"
              }
            } },
            "schema": {
              "description": "Enable CORS for single chronicle log event GET, OPTIONS, and POST",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/-log:startIndex(^(|'![^']+)):endIndex(^(|'![^']+))",
            "method": "POST",
            "projector": "@valos/authority-spindle#/log",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "authorityURI": "valosp://localhost:7358/testaur/",
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Proclaim multiple events to a chronicle log",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/~bvob!:contentHash/",
            "method": "GET",
            "projector": "@valos/authority-spindle#/bvob",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "authorityURI": "valosp://localhost:7358/testaur/",
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Fetch a binary valos object that is accessible by the chronicle",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/~bvob!:contentHash/",
            "method": "HEAD",
            "projector": "@valos/authority-spindle#/bvob",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "authorityURI": "valosp://localhost:7358/testaur/",
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Check whether a binary valos object is accessible by the chronicle",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/~bvob!:contentHash/",
            "method": "OPTIONS",
            "projector": "static",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "headers": {
                "Access-Control-Allow-Methods": "GET, HEAD, OPTIONS, PUT",
                "Access-Control-Allow-Headers": "*",
                "Access-Control-Allow-Origin": "*"
              }
            } },
            "schema": {
              "description": "Enable CORS for binary valos object GET, HEAD, OPTIONS and PUT",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }, {
            "url": "/:chroniclePlot/~bvob!:contentHash/",
            "method": "POST",
            "projector": "@valos/authority-spindle#/bvob",
            "config": { "rules": {
              "routeRoot": ["@@"],
              "authorityURI": "valosp://localhost:7358/testaur/",
              "headers": { "Access-Control-Allow-Headers": "*", "Access-Control-Allow-Origin": "*" }
            } },
            "schema": {
              "description": "Upload a binary valos object to make it accessible by the chronicle",
              "response": { "200": { "type": "string" }, "404": { "type": "string" } }
            }
          }]
        }
      }
    }
  }
}
